{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/ui/pages/custom.js","filenameRelative":"/imports/ui/pages/custom.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/ui/pages/custom.js.map","sourceFileName":"/imports/ui/pages/custom.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"custom"},"ignored":false,"code":"\n// TODO:\n// arrow switches to v if media\n\n// 1. Parse & display text of selected module\nvar selectedModule = $('select#contents').val();\nif (!$.isNumeric(selectedModule)) {\n    $.error(\"Selected module isn't a valid one: \" + selectedModule);\n}\n// a) Parse\nparse(selectedModule);\n\nvar correctEO = \"\";\n// b) Display\nsetTimeout(function () {\n    display();\n}, 1000);\n\n// 2. If module is changed, reparse & display\n$('select#contents').change(function () {\n    selectedModule = $('select#contents').val();\n    if (!$.isNumeric(selectedModule)) {\n        $.error(\"Selected module isn't a valid one: \" + selectedModule);\n    }\n    parse(selectedModule);\n    setTimeout(function () {\n        display();\n    }, 1000);\n});\n\n// 3. Logic - check results, see if input field is correct\n// a) Click 'check' button\n$('button#checking').on('click', function () {\n    if (!$('textarea#answer').hasClass('incorrect') && !$('textarea#answer').hasClass('correct')) {\n        logic();\n    }\n});\n// b) Press 'enter' key\n$('textarea#answer').keydown(function (e) {\n    if (e.keyCode == 13) {\n        e.preventDefault();\n        if (!$('textarea#answer').hasClass('incorrect') && !$('textarea#answer').hasClass('correct')) {\n            logic();\n        }\n    }\n});\n\n// > Skip button clicked\n$('button#skip').on('click', function () {\n    display();\n});\n\n// > If we're displaying mobile css, change '>' to 'v'\n\n// Subroutines\nfunction parse(module) {\n    hash = new Object();\n    var fileName = 'assets/txt/duo' + module + '.txt';\n    try {\n        $.get(fileName, function (data) {\n            // console.log(data);\n            // Break result into line by line\n            var lines = data.split(\"\\n\");\n            var currentEsperanto = \"\";\n            for (var i = 0; i < lines.length; i++) {\n                var current = lines[i];\n                if (matchesEO = current.match(/\\ {4}O:.*$/)) {\n                    // EO\n                    currentEsperanto = matchesEO[0].replace(/\\ {4}O:\\ /, \"\");\n                } else if (matchesEN = current.match(/\\ {4}E:.*$/)) {\n                    // EN\n                    var english = matchesEN[0].replace(/\\ {4}E:\\ /, \"\");\n                    hash[english] = currentEsperanto;\n                }\n            }\n        }, 'text');\n    } catch (e) {\n        console.warn(e);\n    }\n}\n\nfunction display() {\n    var length = Object.keys(hash).length;\n    var index = Math.floor(Math.random() * (length - 1) + 0);\n    var keys = Object.keys(hash);\n    var wantedEng = keys[index];\n    correctEO = hash[wantedEng];\n    $('.display-text').html(wantedEng);\n}\n\nfunction logic() {\n    var inputString = $('textarea#answer').val();\n    var sanitisedString = inputString.replace(/[^a-zA-Z0-9_\\-.,?!'\" ĉĝĥĵŝŭĈĜĤĴŜŬ]/g, \"\");\n    var simplifiedEO = correctEO.replace(/[.?!,:\"]/g, \"\").toLowerCase();\n    var simplifiedString = sanitisedString.replace(/[.?!,:\"]/g, \"\").toLowerCase();\n    if (simplifiedEO === simplifiedString) {\n        // console.log(\"correct \" + simplifiedString + \" \" + simplifiedEO);\n        $('textarea#answer').addClass('correct');\n        // display new one\n        setTimeout(function () {\n            display();\n            $('textarea#answer').val('');\n            $('textarea#answer').removeClass('correct');\n        }, 700);\n    } else {\n        // console.log(\"incorrect \" + simplifiedString + \" \" + simplifiedEO);\n        // Change to correct answer\n        $('textarea#answer').addClass('incorrect');\n        $('textarea#answer').val(correctEO);\n\n        // if keypress, then clear straight away\n        $('textarea#answer').keydown(function (e) {\n            if ($('textarea#answer').hasClass('incorrect') && e.keyCode != 13) {\n                $('textarea#answer').removeClass('incorrect');\n                $('textarea#answer').val('');\n            }\n        });\n\n        // else wait for timer\n        setTimeout(function () {\n            if ($('textarea#answer').hasClass('incorrect')) {\n                $('textarea#answer').removeClass('incorrect');\n                $('textarea#answer').val('');\n            }\n        }, 3000);\n    }\n}","ast":null,"map":{"version":3,"sources":["/imports/ui/pages/custom.js"],"names":[],"mappings":"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","file":"/imports/ui/pages/custom.js.map","sourcesContent":["\n// TODO:\n// arrow switches to v if media\n\n// 1. Parse & display text of selected module\nvar selectedModule = $('select#contents').val();\nif (!$.isNumeric(selectedModule)) {\n    $.error(\"Selected module isn't a valid one: \" + selectedModule);\n}\n// a) Parse\nparse(selectedModule);\n\nvar correctEO = \"\";\n// b) Display\nsetTimeout(function () {\n    display();\n}, 1000);\n\n\n// 2. If module is changed, reparse & display\n$('select#contents').change(function() {\n    selectedModule = $('select#contents').val();\n    if (!$.isNumeric(selectedModule)) {\n        $.error(\"Selected module isn't a valid one: \" + selectedModule);\n    }\n    parse(selectedModule);\n    setTimeout(function () {\n        display();\n    }, 1000);\n});\n\n// 3. Logic - check results, see if input field is correct\n// a) Click 'check' button\n$('button#checking').on('click', function() {\n    if (!$('textarea#answer').hasClass('incorrect') && !$('textarea#answer').hasClass('correct')) {\n        logic();\n    }\n});\n// b) Press 'enter' key\n$('textarea#answer').keydown(function (e) {\n    if (e.keyCode == 13)  {\n        e.preventDefault();\n        if (!$('textarea#answer').hasClass('incorrect') && !$('textarea#answer').hasClass('correct')) {\n            logic();\n        }\n    }\n})\n\n// > Skip button clicked\n$('button#skip').on('click', function() {\n    display();\n});\n\n// > If we're displaying mobile css, change '>' to 'v'\n\n\n// Subroutines\nfunction parse(module) {\n    hash = new Object();\n    var fileName = 'assets/txt/duo' + module + '.txt';\n    try {\n        $.get(fileName, function(data) {\n            // console.log(data);\n            // Break result into line by line\n            var lines = data.split(\"\\n\");\n            var currentEsperanto = \"\";\n            for (var i=0; i<lines.length; i++) {\n                var current = lines[i];\n                if (matchesEO = current.match(/\\ {4}O:.*$/)) { // EO\n                    currentEsperanto = matchesEO[0].replace(/\\ {4}O:\\ /, \"\");\n                } else if (matchesEN = current.match(/\\ {4}E:.*$/)) { // EN\n                    var english = matchesEN[0].replace(/\\ {4}E:\\ /, \"\");\n                    hash[english] = currentEsperanto;\n                }\n            }\n        }, 'text');\n    } catch (e) {\n        console.warn(e);\n    }\n}\n\nfunction display() {\n    var length = Object.keys(hash).length;\n    var index = Math.floor((Math.random() * (length - 1)) + 0);\n    var keys = Object.keys(hash);\n    var wantedEng = keys[index];\n    correctEO = hash[wantedEng];\n    $('.display-text').html(wantedEng);\n}\n\nfunction logic() {\n    var inputString = $('textarea#answer').val();\n    var sanitisedString = inputString.replace(/[^a-zA-Z0-9_\\-.,?!'\" ĉĝĥĵŝŭĈĜĤĴŜŬ]/g, \"\");\n    var simplifiedEO = correctEO.replace(/[.?!,:\"]/g, \"\").toLowerCase();\n    var simplifiedString = sanitisedString.replace(/[.?!,:\"]/g, \"\").toLowerCase();\n    if (simplifiedEO === simplifiedString) {\n        // console.log(\"correct \" + simplifiedString + \" \" + simplifiedEO);\n        $('textarea#answer').addClass('correct');\n        // display new one\n        setTimeout(function () {\n            display();\n            $('textarea#answer').val('');\n            $('textarea#answer').removeClass('correct');\n        }, 700);\n    } else {\n        // console.log(\"incorrect \" + simplifiedString + \" \" + simplifiedEO);\n        // Change to correct answer\n        $('textarea#answer').addClass('incorrect');\n        $('textarea#answer').val(correctEO);\n\n        // if keypress, then clear straight away\n        $('textarea#answer').keydown(function(e) {\n            if ($('textarea#answer').hasClass('incorrect') && (e.keyCode != 13)) {\n                $('textarea#answer').removeClass('incorrect');\n                $('textarea#answer').val('');\n            }\n        });\n\n        // else wait for timer\n        setTimeout(function() {\n            if ($('textarea#answer').hasClass('incorrect')) {\n                $('textarea#answer').removeClass('incorrect');\n                $('textarea#answer').val('');\n            }\n        }, 3000);\n    }\n}\n"]},"hash":"7ef90322e119274d5cde543446ff87edaa5120f3"}
